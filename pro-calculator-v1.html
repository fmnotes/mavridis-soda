<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mavridis Soda Pro</title>

    <link rel="apple-touch-icon" href="icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        :root {
            --primary: #38bdf8;
            --pom: #ef4444; 
            --tea: #10b981; 
            --cola: #a8a29e; 
            --lime: #32CD32; /* Î•ÎÎ¤ÎŸÎÎŸ Î Î¡Î‘Î£Î™ÎÎŸ Î›Î‘ÎªÎœ */
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #fbbf24;
        }

        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: #f1f5f9; margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        
        .brand-header { text-align: center; margin-bottom: 20px; }
        .brand-title { 
            font-size: 1.8rem; 
            font-weight: 800; 
            background: linear-gradient(to right, #38bdf8, #fbbf24); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 20px rgba(0,0,0,0.3);
            margin: 10px 0;
        }

        .container { background: var(--card); width: 100%; max-width: 500px; padding: 22px; border-radius: 28px; box-shadow: 0 20px 50px rgba(0,0,0,0.4); border: 1px solid #334155; margin-bottom: 20px; box-sizing: border-box; overflow: hidden; }
        
        .login-screen { text-align: center; padding: 50px 20px; }
        .logo-img { width: 110px; height: 110px; margin-bottom: 20px; border-radius: 25px; box-shadow: 0 8px 25px rgba(0,0,0,0.5); border: 2px solid var(--primary); object-fit: cover; }
        
        .input-group { background: #334155; padding: 14px; border-radius: 18px; margin-bottom: 12px; border-left: 5px solid var(--primary); transition: 0.3s; }
        .group-pom { border-left-color: var(--pom); }
        .group-tea { border-left-color: var(--tea); }
        .group-cola { border-left-color: var(--cola); }
        .group-lime { border-left-color: var(--lime); }

        label { display: flex; align-items: center; font-size: 0.85rem; color: #94a3b8; margin-bottom: 6px; font-weight: 600; gap: 8px; }
        input { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #1e293b; background: #0f172a; color: white; font-size: 1.15rem; box-sizing: border-box; outline: none; }
        
        button { width: 100%; padding: 18px; border: none; border-radius: 15px; font-size: 1rem; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .btn-main { background: linear-gradient(135deg, #38bdf8, #0284c7); color: white; }
        .btn-agar { background: linear-gradient(135deg, #32CD32, #228B22); color: white; }
        .btn-save { background: #10b981; color: white; margin-top: 15px; }
        .btn-print { background: #475569; color: white; margin-top: 10px; font-size: 0.85rem; opacity: 0.8; }
        
        .results { margin-top: 20px; padding: 20px; background: #064e3b; border-radius: 22px; border: 1px solid #10b981; display: none; animation: fadeIn 0.4s ease; }
        .results-agar { background: #064e3b; border-color: var(--lime); }
        
        .res-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.08); font-size: 1.1rem; }
        .res-val { font-weight: 800; color: var(--accent); }
        
        .cost-tag { color: var(--accent); font-weight: 800; font-size: 1.4rem; text-align: center; margin-top: 15px; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 12px; }

        .history-card { background:#0f172a; padding:15px; border-radius:15px; margin-top:10px; border-left:4px solid #10b981; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        @keyframes fadeIn { from { opacity: 0; scale: 0.95; } to { opacity: 1; scale: 1; } }

        @media print { 
            button, .input-group, .login-screen, .history, .brand-header, .logo-img { display: none !important; }
            .results { display: block !important; background: white !important; color: black !important; border: 2px solid black; padding: 40px; }
            .res-item { border-bottom: 1px solid #333; color: black; }
            .res-val { color: black; }
        }
    </style>
</head>
<body>

    <div id="loginScreen" class="container login-screen">
        <img src="icon.png" onerror="this.src='https://i.imgur.com/vHqJ9Uj.png'" class="logo-img">
        <div class="brand-title">Mavridis Logic</div>
        <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 25px;">Î ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·</p>
        <div class="input-group">
            <label>ğŸ”‘ ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚</label>
            <input type="password" id="passInput" placeholder="****" inputmode="numeric">
        </div>
        <button class="btn-main" onclick="checkPass()">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚</button>
    </div>

    <div id="mainApp" style="display:none; width: 100%; max-width: 500px;">
        <div class="brand-header"><div class="brand-title">Mavridis Soda Pro</div></div>

        <div class="container">
            <h2 style="font-size: 1.1rem; color: var(--primary); text-align:center; font-weight: 500; margin-top:0;">ğŸ“Š ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒÏ‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚</h2>
            
            <div class="input-group"><label>âš–ï¸ Î›Î¯Ï„ÏÎ± Ï€Î±ÏÎ±Î³Ï‰Î³Î®Ï‚</label><input type="number" id="liters" value="20"></div>
            <div class="input-group group-pom"><label>ğŸ Brix Î¡ÏŒÎ´Î¹</label><input type="number" id="brixPom" value="30"></div>
            <div class="input-group group-tea"><label>ğŸƒ Brix Î¤ÏƒÎ¬Î¹ + ÎœÎ¬Ï„Îµ</label><input type="number" id="brixTea" value="29"></div>
            <div class="input-group group-cola"><label>ğŸ¥¤ Brix ÎšÏŒÎ»Î±</label><input type="number" id="brixCola" value="26"></div>
            <div class="input-group"><label>ğŸ’° ÎšÏŒÏƒÏ„Î¿Ï‚ Î±Î½Î¬ Î»Î¯Ï„ÏÎ¿ (â‚¬)</label><input type="number" id="costPerL" value="0.45" step="0.01"></div>

            <button class="btn-main" onclick="calculate()">Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Ï„Î±Î³Î®Ï‚</button>

            <div id="results" class="results">
                <div class="res-item"><span>Î•ÎºÏ‡ÏÎ»Î¹ÏƒÎ¼Î± Î¡ÏŒÎ´Î¹:</span> <span class="res-val" id="outPom"></span> ml</div>
                <div class="res-item"><span>Î¤ÏƒÎ¬Î¹ + ÎœÎ¬Ï„Îµ:</span> <span class="res-val" id="outTea"></span> ml</div>
                <div class="res-item"><span>ÎšÎ±ÏÏÎ´Î· ÎšÏŒÎ»Î±:</span> <span class="res-val" id="outCola"></span> ml</div>
                <div class="res-item"><span>Î”Î¹Î¬Î»Ï…Î¼Î± Î¤Î±Î½Î¯Î½Î·Ï‚:</span> <span class="res-val" id="outTan"></span> ml</div>
                <div class="cost-tag" id="totalCostText"></div>
                
                <button class="btn-save" onclick="saveToHistory()">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï€Î±ÏÏ„Î¯Î´Î±Ï‚</button>
                <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ Î•ÎºÏ„ÏÏ€Ï‰ÏƒÎ· / PDF</button>
            </div>
        </div>

        <div class="container" style="border-top: 6px solid var(--lime);">
            <h2 style="font-size: 1.1rem; color: var(--lime); text-align:center; font-weight: 500; margin-top:0;">ğŸ‹ Î”Î¹Î±ÏÎ³Î±ÏƒÎ· Ï‡Ï…Î¼Î¿Ï Î›Î¬Î¹Î¼</h2>
            <div class="input-group group-lime"><label>ğŸ§ª ml Ï‡Ï…Î¼Î¿Ï Î›Î¬Î¹Î¼ (Î£ÏÎ½Î¿Î»Î¿)</label><input type="number" id="mlJuice" value="300"></div>
            <button class="btn-agar" onclick="calculateAgar()">Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î†Î³Î±Ï</button>
            
            <div id="resultsAgar" class="results results-agar">
                <div class="res-item"><span>Î†Î³Î±Ï-Î†Î³Î±Ï (0.2%):</span> <span class="res-val" id="outAgar"></span> g</div>
                <div class="res-item"><span>ğŸ”¥ Î’ÏÎ¬ÏƒÎ¹Î¼Î¿ (1/4):</span> <span class="res-val" id="outHot"></span> ml</div>
                <div class="res-item"><span>â„ï¸ ÎšÏÏÎ¿ Î›Î¬Î¹Î¼ (3/4):</span> <span class="res-val" id="outCold"></span> ml</div>
                <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ Î•ÎºÏ„ÏÏ€Ï‰ÏƒÎ· / PDF</button>
            </div>
        </div>

        <div class="history container">
            <h3 style="color: #94a3b8; font-size: 0.9rem; padding-bottom: 10px; font-weight: 500;">ğŸ“… Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Ï€Î±ÏÏ„Î¯Î´Ï‰Î½</h3>
            <div id="logContainer"></div>
        </div>
    </div>

    <script>
        const _0x5a1 = "MTk4NA=="; 

        function checkPass() {
            const input = document.getElementById('passInput').value;
            if(btoa(input) === _0x5a1) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                renderHistory();
            } else { alert("Î›Î¬Î¸Î¿Ï‚ ÎšÏ‰Î´Î¹ÎºÏŒÏ‚!"); }
        }

        function calculate() {
            const mBrix = { cola: 26, tea: 29, pom: 30, tan: 41 };
            const mMl = { cola: 5, tea: 5, pom: 5, tan: 2 };
            let L = parseFloat(document.getElementById('liters').value);
            let costL = parseFloat(document.getElementById('costPerL').value);
            let bPom = parseFloat(document.getElementById('brixPom').value);
            let bTea = parseFloat(document.getElementById('brixTea').value);
            let bCola = parseFloat(document.getElementById('brixCola').value);

            let resPom = (mBrix.pom / bPom) * mMl.pom * (L / 20);
            let resTea = (mBrix.tea / bTea) * mMl.tea * (L / 20);
            let resCola = (mBrix.cola / bCola) * mMl.cola * (L / 20);
            let resTan = 2 * (L / 20);

            document.getElementById('outPom').innerText = resPom.toFixed(2);
            document.getElementById('outTea').innerText = resTea.toFixed(2);
            document.getElementById('outCola').innerText = resCola.toFixed(2);
            document.getElementById('outTan').innerText = resTan.toFixed(2);
            document.getElementById('totalCostText').innerText = "Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎºÏŒÏƒÏ„Î¿Ï‚: " + (L * costL).toFixed(2) + "â‚¬";
            document.getElementById('results').style.display = 'block';
        }

        function calculateAgar() {
            let ml = parseFloat(document.getElementById('mlJuice').value);
            document.getElementById('outAgar').innerText = (ml * 0.002).toFixed(3);
            document.getElementById('outHot').innerText = (ml * 0.25).toFixed(0);
            document.getElementById('outCold').innerText = (ml * 0.75).toFixed(0);
            document.getElementById('resultsAgar').style.display = 'block';
        }

        function saveToHistory() {
            let log = `Î Î±ÏÏ„Î¯Î´Î± ${document.getElementById('liters').value}L - ${document.getElementById('totalCostText').innerText}`;
            let history = JSON.parse(localStorage.getItem('mavridisLog') || "[]");
            history.unshift({date: new Date().toLocaleString('el-GR'), data: log});
            localStorage.setItem('mavridisLog', JSON.stringify(history.slice(0, 5)));
            renderHistory();
            alert("Î— Ï€Î±ÏÏ„Î¯Î´Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ!");
        }

        function renderHistory() {
            let history = JSON.parse(localStorage.getItem('mavridisLog') || "[]");
            document.getElementById('logContainer').innerHTML = history.map(item => `
                <div class="history-card">
                    <span style="color:var(--primary); font-size:0.75rem; font-weight:bold;">${item.date}</span><br>
                    <span style="font-size:0.95rem;">${item.data}</span>
                </div>`).join('');
        }

        document.getElementById('passInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkPass();
        });
    </script>
</body>
</html>
